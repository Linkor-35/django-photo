---
# basic user configuration
app_user_name: "troyka"
app_user_pass: "!vault |
      $ANSIBLE_VAULT;1.1;AES256
      36666138646233303063663365356536343064366632633435653161643264306166393262376637
      6133303162383135306239353064633030636338373030360a333332643361366165643434643035
      38373030633037303938383239393135653934633334663637373162336439626136386164646235
      3235653030616665390a316462613331666664343663666633333962643963633264653534616235
      3363"
app_user_keys:
  - "https://github.com/jtprog.keys"
  - "https://github.com/Linkor-35.keys"

app_user_group: "admins"
app_user_bash_profile_content: "bash_profile"
app_user_vimrc: "vimrc"

# configure deploy
deploy_src_repo_url: "https://github.com/Linkor-35/django-photo.git"
deploy_src_repo_dest: "/home/{{ app_user_name }}/app"
deploy_src_work_dir: "{{ deploy_src_repo_dest }}/src"
deploy_repository_branche_name: "master"

# configure and run application
run_site_domain: "troyka-foto.ru"
run_site_host: "127.0.0.1"
run_site_port: 8000
run_site_gunicorn_dest: "{{ deploy_src_repo_dest }}/gunicorn.py"
run_site_pid: /var/tmp/troyka.pid
run_site_nginx_default: "/etc/nginx/conf.d/default.conf"
run_site_systemd_unit: "/etc/systemd/system/{{ run_site_domain }}.service"
run_site_nginx_access_log: "/var/log/nginx/{{ run_site_domain }}.access.log"
run_site_nginx_error_log: "/var/log/nginx/{{ run_site_domain }}.error.log"
run_site_secret_key: "$up3RseCR37"
run_site_nginx_upstream_name: "python-backend"
run_site_allowed_hosts:
  - "127.0.0.1"
  - "{{ run_site_host }}:{{ run_site_port }}"
  - "{{ run_site_domain }}"
  - "{{ run_site_nginx_upstream_name }}"

run_site_nginx_ssl: true

# letsencrypt
certbot_certs:
  - email: "admin@{{ run_site_domain }}"
    domains:
      - "{{ run_site_domain }}"
certbot_auto_renew_user: "root"
certbot_auto_renew_minute: "20"
certbot_auto_renew_hour: "5"
certbot_auto_renew: true
certbot_auto_renew_options: "--quiet --no-self-upgrade"


certbot_admin_email: "admin@{{ run_site_domain }}"
certbot_create_if_missing: true
certbot_create_standalone_stop_services: []
certbot_certs:
  - domains:
      - "{{ run_site_domain }}"
nginx_vhosts:
  - listen: "443 ssl http2"
    server_name: "{{ run_site_domain }}"
    root: "/usr/share/nginx/html"
    index: "index.html index.htm"
    state: "present"
    template: "{{ nginx_vhost_template }}"
    filename: "certbot_test.conf"
    extra_parameters: |
      ssl_certificate     /etc/letsencrypt/live/{{ run_site_domain }}/fullchain.pem;
      ssl_certificate_key /etc/letsencrypt/live/{{ run_site_domain }}/privkey.pem;
      ssl_protocols       TLSv1.1 TLSv1.2;
      ssl_ciphers         HIGH:!aNULL:!MD5;
